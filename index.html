<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Laboratory Usage System</title>
<link rel="icon" type="image/png" href="gs.jfif">
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
  :root{--gsc-blue:#0f172a;--gsc-accent:#2563eb;--gsc-bg:#f8fafc;--muted:#64748b}
  *{box-sizing:border-box}
  body{font-family:Inter,Segoe UI,Arial,sans-serif;margin:0;background:var(--gsc-bg);color:var(--gsc-blue);-webkit-font-smoothing:antialiased}
  header{background:white;color:var(--gsc-blue);padding:14px 20px;box-shadow:0 6px 18px rgba(15,23,42,.06);border-bottom:4px solid rgba(37,99,235,.06)}
  .header-container{display:flex;align-items:center;gap:14px;max-width:1200px;margin:0 auto}
  .gsc-logo{width:72px;height:auto;border-radius:8px}
  .header-text h1{margin:0;font-size:18px}
  .header-text p{margin:2px 0 0;font-size:13px;color:var(--muted)}
  nav{max-width:1200px;margin:12px auto;padding:0 20px;display:flex;gap:10px}
  .tab{background:white;padding:9px 14px;border-radius:10px;border:1px solid #eef2ff;cursor:pointer;font-weight:700;color:var(--gsc-blue)}
  .tab.active{background:linear-gradient(90deg,var(--gsc-accent),#1e40af);color:white;border-color:transparent}
  main{max-width:1200px;margin:18px auto;padding:0 20px 40px}
  .card{background:white;border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(15,23,42,.04);margin-bottom:18px}
  label{font-weight:700;font-size:13px;color:var(--gsc-blue);display:block;margin-bottom:6px}
  input,textarea,select,button{font-size:14px}
  input,textarea,select{width:100%;padding:10px;border:1px solid #e6eefc;border-radius:8px}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .row .col{flex:1;min-width:160px}
  button.primary{background:var(--gsc-accent);color:white;border:none;cursor:pointer;padding:10px 12px;border-radius:8px;font-weight:800}
  button.secondary{background:#fff;border:1px solid #e6eefc;color:var(--gsc-blue);cursor:pointer;padding:9px 12px;border-radius:8px;font-weight:700}
  .controls{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap}
  .table-wrap{overflow:auto;border-radius:10px;border:1px solid #eef2ff}
  table{width:100%;border-collapse:collapse;background:transparent}
  th,td{padding:10px;border-bottom:1px solid #f1f5f9;text-align:left;font-size:13px}
  th{background:#0f172a;color:white;position:sticky;top:0}
  tr:nth-child(even) td{background:#fbfdff}
  .list-area{width:100%;max-height:220px;overflow:auto;padding:6px 8px;border-left:1px solid #eef4ff}
  footer{max-width:1200px;margin:22px auto;padding:18px 20px;color:#555;font-size:13px;text-align:center}
  .toast{position:fixed;right:18px;bottom:18px;background:rgba(37,99,235,.95);color:white;padding:10px 14px;border-radius:8px;box-shadow:0 6px 18px rgba(15,23,42,.2);z-index:9999;font-weight:600;display:none}
  .flex-right{display:flex;gap:8px;align-items:center}
  .search-input{min-width:220px}
  /* modals */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,.5);display:none;align-items:center;justify-content:center;z-index:9998}
  .modal{width:100%;max-width:760px;background:white;border-radius:12px;padding:16px}
  .modal .row{margin-top:8px}
  .small{font-size:12px;color:var(--muted)}
  .chip{display:inline-block;padding:6px 8px;border-radius:999px;border:1px solid #eef2ff;background:white}
  @media (min-width:900px){ .reports-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px} }
  @media print { nav, .controls, form, footer, .toast, .modal-backdrop { display:none !important; } }
  /* ------- MOBILE FIXES (NO DESIGN CHANGES) ------- */
@media (max-width: 768px) {
  body { background: linear-gradient(180deg, #f5f7fa, #e9eef4); }
  body, html { margin:0; padding:0; overflow-x:hidden; }
  .header { text-align:center; padding:10px; }
  .header img { width:90px; height:auto; }
  .tab-btn { width:48%; font-size:14px; padding:10px; }
  .section { padding:10px; }
  input, select, textarea { width:100%; font-size:14px; }
  table { width:100%; display:block; overflow-x:auto; white-space:nowrap; }
  button { font-size:14px; padding:10px 14px; }
  .modal { width:95%; left:50%; transform:translateX(-50%); margin:0; padding:15px; }
  .modal-content { max-height:85vh; overflow-y:auto; }
}
/* ------------------------------
   GLOBAL OPTIMIZATION
-------------------------------*/
* { box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
body, html { margin:0; padding:0; overflow-x:hidden; width:100%; scroll-behavior:smooth; }
img { max-width:100%; height:auto; display:block; }
body { -webkit-font-smoothing:antialiased; text-rendering: optimizeLegibility; }
.section { width:100%; padding:20px; }
input, select, textarea { width:100%; padding:10px; border-radius:6px; }
button { padding:10px 16px; border-radius:8px; }
/* ------------------------------
   TABLE IMPROVEMENT
-------------------------------*/
.table-wrapper { width:100%; overflow-x:auto; -webkit-overflow-scrolling: touch; }
table { width:100%; border-collapse:collapse; white-space: nowrap; }
/* ------------------------------
   MODAL OPTIMIZATION
-------------------------------*/
.modal { position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:90%; max-width:480px; }
.modal-content { max-height:80vh; overflow-y:auto; border-radius:12px; }
/* ------------------------------
   RESPONSIVE (KEEP DESIGN)
-------------------------------*/
@media (max-width: 768px) {
  .header { text-align:center; padding:10px; }
  .header img { width:85px; }
  .tab-btn { width:50%; padding:10px; font-size:14px; }
  .section { padding:12px; }
  .form-group { margin-bottom:12px; }
  .log-entry { padding:10px; }
  .modal { width:94%; }
}
</style>
</head>
<body>
  <header>
    <div class="header-container">
      <img src="gs.jfif" class="gsc-logo" alt="GSC logo">
      <div class="header-text">
        <h1>Good Samaritan Colleges</h1>
        <p>Laboratory Usage System</p>
      </div>
    </div>
  </header>

  <nav>
    <div id="tab-logbook" class="tab active">Logbook</div>
    <div id="tab-reports" class="tab">Reports</div>
    <div id="tab-chemicals" class="tab">Chemicals</div>
  </nav>

  <main>
    <!-- LOGBOOK -->
    <section id="view-logbook">
      <!-- ... existing Logbook HTML ... same as before ... -->
    </section>

    <!-- REPORTS -->
    <section id="view-reports" style="display:none;">
      <!-- ... existing Reports HTML ... same as before ... -->
    </section>

    <!-- CHEMICALS -->
    <section id="view-chemicals" style="display:none;">
      <div class="card">
        <h2 style="margin:0;color:var(--gsc-blue)">Chemical Inventory</h2>
        <div class="controls">
          <input id="chemSearchInput" class="search-input" placeholder="Search reagent..." />
          <button id="chemClearSearch" class="secondary">Clear</button>
          <button id="loadChemSheetBtn" class="secondary">Load Live Sheet</button>
        </div>
        <div class="table-wrap card" style="padding:0">
          <table id="chemTable">
            <thead><tr><th>Chemical</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Â© 2025 Good Samaritan Colleges | Faculty Laboratory eLog System â€” Improved<br>
    Prepared by Piolo L. Bernardino â€” Laboratory Custodian
  </footer>

  <div id="toast" class="toast"></div>

<script>
// ====================== EXISTING JS CODE ======================
// ... your full existing JS code for Logbook & Reports (same as before) ...

// ====================== CHEMICALS TAB ======================
const tabChem = document.getElementById('tab-chemicals');
const viewChem = document.getElementById('view-chemicals');
const chemTableBody = document.querySelector('#chemTable tbody');
const chemSearchInput = document.getElementById('chemSearchInput');
const chemClearSearch = document.getElementById('chemClearSearch');
const loadChemSheetBtn = document.getElementById('loadChemSheetBtn');

let chemicalsList = [];

async function fetchChemicalsSheet(){
  try{
    const SHEET_ID_CHEM = "11ktnDlnAgnaasZe9tfAkV6_zNG2oHCm_3EGZIVotQ7Y"; // your sheet
    const SHEET_NAME_CHEM = "Chemicals"; // sheet tab name
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID_CHEM}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(SHEET_NAME_CHEM)}`;
    const res = await fetch(url);
    if(!res.ok) throw new Error('Fetch failed');
    const text = await res.text();
    const rows = text.trim().split('\n').map(r=>r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/));
    rows.shift(); // remove header
    chemicalsList = rows.map(r => r[0] || '');
    renderChemTable();
    showToast('ðŸ“Š Chemicals loaded');
  }catch(err){ console.error(err); showToast('âš ï¸ Could not load chemicals'); }
}

function renderChemTable(){
  const q = (chemSearchInput.value||'').toLowerCase();
  chemTableBody.innerHTML = '';
  chemicalsList.filter(c => c.toLowerCase().includes(q))
               .forEach(c=>{
                 const tr = document.createElement('tr');
                 tr.innerHTML = `<td>${c}</td>`;
                 chemTableBody.appendChild(tr);
               });
}

chemSearchInput.addEventListener('input', renderChemTable);
chemClearSearch.addEventListener('click', ()=>{ chemSearchInput.value=''; renderChemTable(); });
loadChemSheetBtn.addEventListener('click', fetchChemicalsSheet);

// TAB SWITCH
tabChem.onclick = ()=>{
  tabChem.classList.add('active');
  tabLog.classList.remove('active');
  tabReports.classList.remove('active');
  viewChem.style.display='';
  viewLog.style.display='none';
  viewReports.style.display='none';
};
</script>
</body>
</html>
