<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Faculty Laboratory eLog System - Good Samaritan Colleges</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --gsc-blue:#1e3a8a;
      --gsc-accent:#2563eb;
      --gsc-bg:#f1f5f9;
    }
    body { font-family:'Segoe UI',Arial,sans-serif;margin:0;background:var(--gsc-bg);color:#222; }
    header { background:white;color:var(--gsc-blue);padding:15px 20px;
      box-shadow:0 4px 10px rgba(0,0,0,0.08);border-bottom:4px solid var(--gsc-blue); }
    .header-container{display:flex;align-items:center;gap:18px;flex-wrap:wrap;max-width:1100px;margin:0 auto;}
    .gsc-logo{width:100px;height:auto;display:block;}
    .header-text h1{margin:0;font-size:22px;color:var(--gsc-blue);}
    .header-text p{margin:4px 0 0;font-size:14px;color:var(--gsc-accent);font-weight:500;}
    nav{max-width:1100px;margin:16px auto 0;padding:0 20px;display:flex;gap:10px;}
    .tab{background:white;padding:10px 16px;border-radius:8px;border:1px solid #e6eefc;cursor:pointer;font-weight:600;color:var(--gsc-blue);box-shadow:0 2px 6px rgba(0,0,0,0.04);}
    .tab.active{background:linear-gradient(90deg,var(--gsc-blue),var(--gsc-accent));color:white;border-color:transparent;}
    main{max-width:1100px;margin:18px auto;padding:0 20px 40px;}
    .card{background:white;border-radius:12px;padding:18px;box-shadow:0 6px 16px rgba(15,23,42,0.04);margin-bottom:18px;}
    form h2{text-align:center;color:var(--gsc-blue);}
    input,textarea,button{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ced4da;border-radius:6px;font-size:14px;}
    input:focus,textarea:focus{outline:none;border-color:var(--gsc-accent);box-shadow:0 0 6px rgba(37,99,235,0.15);}
    button.primary{background:var(--gsc-accent);color:white;border:none;cursor:pointer;font-weight:700;}
    button.secondary{background:#fff;border:1px solid #ddd;color:#333;cursor:pointer;}
    .row{display:flex;gap:10px;flex-wrap:wrap;}
    .row .col{flex:1;min-width:150px;}
    table{width:100%;border-collapse:collapse;background:white;border-radius:8px;overflow:hidden;box-shadow:0 6px 16px rgba(15,23,42,0.04);}
    th,td{padding:10px;border:1px solid #e6eefc;text-align:left;font-size:13px;}
    th{background:var(--gsc-blue);color:white;font-weight:700;}
    tr:nth-child(even) td{background:#fbfdff;}
    .reports-grid{display:grid;gap:18px;}
    .report-card{display:flex;gap:14px;align-items:flex-start;background:white;padding:14px;border-radius:10px;box-shadow:0 6px 16px rgba(15,23,42,0.04);}
    .chart-area{flex:1;min-height:220px;}
    .list-area{width:260px;max-height:220px;overflow:auto;padding:6px 8px;border-left:1px solid #eef4ff;}
    .list-item{display:flex;justify-content:space-between;padding:6px 4px;border-bottom:1px dashed #f1f6ff;font-size:13px;}
    .list-item:last-child{border-bottom:none;}
    footer{max-width:1100px;margin:22px auto;padding:18px 20px;color:#555;font-size:13px;text-align:center;}
    .toast{position:fixed;right:18px;bottom:18px;background:rgba(37,99,235,0.95);color:white;padding:10px 14px;border-radius:8px;box-shadow:0 6px 18px rgba(15,23,42,0.2);z-index:9999;font-weight:600;display:none;}
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <img src="gs.jfif" alt="GSC logo" class="gsc-logo">
      <div class="header-text">
        <h1>Good Samaritan Colleges</h1>
        <p>Faculty Laboratory eLog System</p>
      </div>
    </div>
  </header>

  <nav>
    <div id="tab-logbook" class="tab active">Logbook</div>
    <div id="tab-reports" class="tab">Reports</div>
  </nav>

  <main>
    <section id="view-logbook">
      <div class="card">
        <form id="elogForm">
<h2>Add Faculty Log</h2>
<div class="row">
  <div class="col">
    <input id="log_id" placeholder="Log ID (auto)" readonly>
  </div>
</div>
          <div class="row">
            <div class="col"><input id="faculty_name" placeholder="Faculty Name" required></div>
            <div class="col"><input id="department" placeholder="Department" required></div>
          </div>
          <div class="row">
            <div class="col"><input id="room_name" placeholder="Laboratory Room Name" required></div>
            <div class="col"><input id="room_number" placeholder="Room Number (optional)"></div>
          </div>
          <input id="equipment" placeholder="Special / Major Equipment Used (optional)">
          <div class="row">
            <div class="col"><input type="date" id="date" readonly></div>
            <div class="col"><input type="time" id="time_in" required></div>
            <div class="col"><input type="time" id="time_out" required></div>
          </div>
          <input id="purpose" placeholder="Purpose / Activity" required>
          <textarea id="remarks" rows="2" placeholder="Remarks (optional)"></textarea>
          <div style="display:flex;gap:10px;justify-content:center;">
            <button class="primary" type="submit">Add Log</button>
            <button class="secondary" id="clearFormBtn" type="button">Clear</button>
          </div>
        </form>
      </div>

      <div class="card">
        <table id="elogTable">
          <thead>
            <tr>
              <th>Log ID</th><th>Faculty Name</th><th>Department</th><th>Room Name</th><th>Room #</th>
              <th>Equipment</th><th>Date</th><th>Time In</th><th>Time Out</th><th>Purpose</th><th>Remarks</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="view-reports" style="display:none;">
      <div class="card"><h2 style="margin:0;color:var(--gsc-blue)">Faculty Laboratory Usage Report — Good Samaritan Colleges</h2></div>
      <div class="reports-grid">
        <div class="report-card card"><div class="chart-area"><canvas id="chartRooms"></canvas></div><div class="list-area"><strong>Rooms</strong><div id="listRooms"></div></div></div>
        <div class="report-card card"><div class="chart-area"><canvas id="chartEquipment"></canvas></div><div class="list-area"><strong>Equipment</strong><div id="listEquipment"></div></div></div>
        <div class="report-card card"><div class="chart-area"><canvas id="chartFaculty"></canvas></div><div class="list-area"><strong>Faculty</strong><div id="listFaculty"></div></div></div>
      </div>
    </section>
  </main>

  <footer>
    © 2025 Good Samaritan Colleges | Faculty Laboratory eLog System<br>
    Developed by Piolo L. Bernardino – Laboratory Custodian
  </footer>
  <div id="toast" class="toast"></div>

  <script>
    const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSe2UZ0UhAMuz8e6t5ip3yCPUHoLezNDoPnNQdx1VKMvflUlZQ/formResponse";
    const tabLog=document.getElementById('tab-logbook'),tabReports=document.getElementById('tab-reports'),
    viewLog=document.getElementById('view-logbook'),viewReports=document.getElementById('view-reports'),
    form=document.getElementById('elogForm'),tableBody=document.querySelector('#elogTable tbody'),
    toast=document.getElementById('toast');
    let logs=JSON.parse(localStorage.getItem('facultyLogs'))||[],logCounter=logs.length?Math.max(...logs.map(l=>l.log_id||0))+1:1;
    function showToast(m){toast.textContent=m;toast.style.display='block';setTimeout(()=>toast.style.display='none',3000);}
    function renderTable(){tableBody.innerHTML='';logs.forEach(l=>{const r=document.createElement('tr');r.innerHTML=`<td>${l.log_id}</td><td>${l.faculty_name}</td><td>${l.department}</td><td>${l.room_name}</td><td>${l.room_number}</td><td>${l.equipment}</td><td>${l.date}</td><td>${l.time_in}</td><td>${l.time_out}</td><td>${l.purpose}</td><td>${l.remarks}</td>`;tableBody.appendChild(r)});localStorage.setItem('facultyLogs',JSON.stringify(logs));updateReports();}
function setDate(){
  const n=new Date();
  document.getElementById('date').value = n.toISOString().split('T')[0];
  document.getElementById('log_id').value = logCounter;
}
    form.addEventListener('submit',async e=>{
      e.preventDefault();
      const newLog={log_id:logCounter++,faculty_name:form.faculty_name.value,department:form.department.value,room_name:form.room_name.value,room_number:form.room_number.value,equipment:form.equipment.value,date:form.date.value,time_in:form.time_in.value,time_out:form.time_out.value,purpose:form.purpose.value,remarks:form.remarks.value};
      logs.push(newLog);renderTable();form.reset();setDate();
      const fd=new FormData();
      fd.append("entry.1988755767",newLog.faculty_name);
      fd.append("entry.314437892",newLog.department);
      fd.append("entry.1699522875",newLog.room_name);
      fd.append("entry.1623053106",newLog.room_number);
      fd.append("entry.907740534",newLog.equipment);
      fd.append("entry.1250492354",newLog.date);
      fd.append("entry.665060428",newLog.time_in);
      fd.append("entry.1758389574",newLog.time_out);
      fd.append("entry.937977332",newLog.purpose);
      fd.append("entry.195750658",newLog.remarks);
      try{await fetch(GOOGLE_FORM_URL,{method:'POST',body:fd,mode:'no-cors'});showToast('✅ Log synced to Google Sheet');}catch(err){showToast('⚠️ Saved locally, sync failed');}
    });
    tabLog.onclick=()=>{tabLog.classList.add('active');tabReports.classList.remove('active');viewLog.style.display='';viewReports.style.display='none';};
    tabReports.onclick=()=>{tabReports.classList.add('active');tabLog.classList.remove('active');viewReports.style.display='';viewLog.style.display='none';updateReports();};
    function count(items){const o={};items.forEach(i=>o[i]=(o[i]||0)+1);return o;}
    function fillList(c,o){c.innerHTML='';Object.entries(o).forEach(([k,v])=>{const d=document.createElement('div');d.className='list-item';d.innerHTML=`<div>${k}</div><div>${v}</div>`;c.appendChild(d);});}
    function updateReports(){
      const rooms=count(logs.map(l=>l.room_name||'(none)'));
      const equip=count(logs.map(l=>l.equipment||'(none)'));
      const fac=count(logs.map(l=>l.faculty_name||'(none)'));
      fillList(document.getElementById('listRooms'),rooms);
      fillList(document.getElementById('listEquipment'),equip);
      fillList(document.getElementById('listFaculty'),fac);
      new Chart(document.getElementById('chartRooms'),{type:'bar',data:{labels:Object.keys(rooms),datasets:[{data:Object.values(rooms),backgroundColor:'rgba(37,99,235,0.6)'}]},options:{plugins:{legend:{display:false}}}});
      new Chart(document.getElementById('chartEquipment'),{type:'bar',data:{labels:Object.keys(equip),datasets:[{data:Object.values(equip),backgroundColor:'rgba(16,185,129,0.6)'}]},options:{plugins:{legend:{display:false}}}});
      new Chart(document.getElementById('chartFaculty'),{type:'bar',data:{labels:Object.keys(fac),datasets:[{data:Object.values(fac),backgroundColor:'rgba(234,179,8,0.6)'}]},options:{plugins:{legend:{display:false}}}});
    }
    document.getElementById('clearFormBtn').onclick=()=>{form.reset();setDate();}
    setDate();renderTable();updateReports();
  </script>
</body>
</html>

