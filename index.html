<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Laboratory Usage System</title>
<link rel="icon" type="image/png" href="gs.jfif">
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* ... all your existing CSS stays here ... */
</style>
</head>
<body>
  <header>
    <div class="header-container">
      <img src="gs.jfif" class="gsc-logo" alt="GSC logo">
      <div class="header-text">
        <h1>Good Samaritan Colleges</h1>
        <p>Laboratory Usage System</p>
      </div>
    </div>
  </header>

  <nav>
    <div id="tab-logbook" class="tab active">Logbook</div>
    <div id="tab-reports" class="tab">Reports</div>
    <div id="tab-chemicals" class="tab">Chemicals</div>
  </nav>

  <main>
    <!-- LOGBOOK -->
    <section id="view-logbook">
      <!-- ... your existing logbook form and table ... -->
    </section>

    <!-- REPORTS -->
    <section id="view-reports" style="display:none;">
      <!-- ... your existing reports code ... -->
    </section>

    <!-- CHEMICALS -->
    <section id="view-chemicals" style="display:none;">
      <div class="card">
        <h2 style="margin:0 0 10px;color:var(--gsc-blue)">Chemicals Inventory</h2>
        <div class="controls" style="margin-bottom:10px">
          <input id="chemSearch" class="search-input" placeholder="Search chemical" />
          <button id="loadChemicals" class="secondary">Load Chemicals</button>
        </div>
        <div class="table-wrap card" style="padding:0">
          <table id="chemTable">
            <thead><tr><th>Chemical Name</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Â© 2025 Good Samaritan Colleges | Faculty Laboratory eLog System â€” Improved<br>
    Prepared by Piolo L. Bernardino â€” Laboratory Custodian
  </footer>

  <div id="toast" class="toast"></div>

<script>
// ==================== EXISTING CODE ====================
/* All your current JS for Logbook, Reports, Sync, Charts, Filters, etc. stays exactly the same */

// ==================== TAB SWITCH ====================
const tabLog = document.getElementById('tab-logbook');
const tabReports = document.getElementById('tab-reports');
const tabChem = document.getElementById('tab-chemicals');
const viewLog = document.getElementById('view-logbook');
const viewReports = document.getElementById('view-reports');
const viewChem = document.getElementById('view-chemicals');

tabLog.onclick = () => { tabLog.classList.add('active'); tabReports.classList.remove('active'); tabChem.classList.remove('active'); viewLog.style.display=''; viewReports.style.display='none'; viewChem.style.display='none'; };
tabReports.onclick = () => { tabReports.classList.add('active'); tabLog.classList.remove('active'); tabChem.classList.remove('active'); viewReports.style.display=''; viewLog.style.display='none'; viewChem.style.display='none'; };
tabChem.onclick = () => { tabChem.classList.add('active'); tabLog.classList.remove('active'); tabReports.classList.remove('active'); viewChem.style.display=''; viewLog.style.display='none'; viewReports.style.display='none'; fetchChemicals(); };

// ==================== CHEMICALS FETCH ====================
const chemTableBody = document.querySelector('#chemTable tbody');
const chemSearch = document.getElementById('chemSearch');
const loadChemicalsBtn = document.getElementById('loadChemicals');

const CHEM_SHEET_ID = '11ktnDlnAgnaasZe9tfAkV6_zNG2oHCm_3EGZIVotQ7Y'; // your sheet ID
const CHEM_SHEET_NAME = 'Sheet1'; // change if your sheet name is different
let chemicals = [];

async function fetchChemicals(){
  try{
    const url = `https://docs.google.com/spreadsheets/d/${CHEM_SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(CHEM_SHEET_NAME)}`;
    const res = await fetch(url);
    if(!res.ok) throw new Error('Fetch failed');
    const text = await res.text();
    const rows = text.trim().split('\n').map(r=>r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/));
    rows.shift(); // remove header
    chemicals = rows.map(r=>r[0].replace(/"/g,''));
    renderChemicals();
    showToast('ðŸ“Š Chemicals loaded');
  }catch(err){ console.error(err); showToast('âš ï¸ Could not load chemicals'); }
}

function renderChemicals(){
  const q = chemSearch.value.toLowerCase().trim();
  chemTableBody.innerHTML = '';
  chemicals.filter(c => c.toLowerCase().includes(q)).forEach(name => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${name}</td>`;
    chemTableBody.appendChild(tr);
  });
}

chemSearch.addEventListener('input', renderChemicals);
loadChemicalsBtn.addEventListener('click', fetchChemicals);

</script>
</body>
</html>
